(function(e){function t(t){for(var i,o,c=t[0],u=t[1],l=t[2],f=0,d=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);a&&a(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,c=1;c<n.length;c++){var u=n[c];0!==s[u]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},s={app:0},r=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var a=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("85ec"),s=n.n(i);s.a},1859:function(e,t,n){},"1a71":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("img",{attrs:{alt:"Vue logo",src:n("cf05")}}),i("multi-items-input",{attrs:{fetch:e.search,placeholder:"请输入关键字",height:100,separator:";"},on:{select:e.select,delete:e.onDelete}}),i("p",[e._v(e._s(e.data))])],1)},r=[],o=(n("4de4"),n("c975"),n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"jw-container",style:{height:e.height+"px"},on:{click:function(t){return t.target!==t.currentTarget?null:(t.preventDefault(),e.setLastItemFocus(t))}}},[e._l(e.selectedItems,(function(t,i){return n("input-item",{key:"selectedItems"+i,ref:"jw-selectedItems"+i,refInFor:!0,attrs:{name:t.name,editable:!0,id:t.id,"fetch-suggestions":e.fetch,"trigger-on-focus":!0,suffix:e.separator},on:{deleteClick:function(n){return e.deleteItem(t)},select:function(t){return e.addSelectedItemsGenerator(i)(t)}}})})),0===e.selectedItems.length?n("auto-complete-input",{ref:"pre-input",staticClass:"pre-input",attrs:{"trigger-on-focus":!0,fetch:e.fetch,placeholder:e.placeholder},on:{select:function(t){return e.addSelectedItemsGenerator(-1)(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}):e._e()],2)}),c=[],u=(n("c740"),n("26e9"),n("fb6a"),n("a434"),n("a9e3"),n("f4e8")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"jw__container"},[n("input",e._b({attrs:{type:"text",autocomplete:"off",placeholder:e.placeholder,disabled:e.disabled},domProps:{value:e.value},on:{input:e.input,blur:e.blur,focus:e.focus,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.keyEnter(t)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:(t.preventDefault(),e.keyEnter(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.keyUp(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.keyDown(t)}]}},"input",[e.$attrs],!1)),e.show?n("div",{staticClass:"jw-list"},e._l(e.internalItems,(function(t,i){return n("div",{key:"jw__item"+i,ref:"jw__item"+i,refInFor:!0,staticClass:"jw-list-item",class:{"jw-list-active":i===e.cursor},on:{click:function(n){return n.stopPropagation(),e.onClickItem(t)}}},[n("div",[e._v(e._s(t.name))])])})),0):e._e()])},a=[],f=n("15d3"),d={name:"AutoCompleteInput",inheritAttrs:!1,props:{value:null,getLabel:{type:Function,default:function(e){return e}},triggerOnFocus:{type:Boolean},fetch:{type:Function},placeholder:String,disabled:{type:Boolean,default:!1},keepOpen:{type:Boolean,default:!1}},data:function(){return{showList:!1,cursor:-1,selectedItem:null,internalItems:[]}},computed:{hasItems:function(){return!!this.internalItems.length},show:function(){return this.showList&&this.hasItems||this.keepOpen}},methods:{__fetch:Object(f["a"])(300,(function(){var e=this;"function"===typeof this.fetch&&this.fetch(this.value,(function(t){e.internalItems=t,e.showList=!0}))})),__itemView:function(e){e&&e.scrollIntoView&&e.scrollIntoView(!1)},__selectItem:function(e){e&&(this.selectedItem=e,this.$emit("select",e))},input:function(e){this.$emit("input",e.target.value),this.__fetch()},focus:function(){return this.triggerOnFocus&&this.__fetch()},blur:function(){var e=this;this.$emit("blur"),setTimeout((function(){e.showList=!1}),200)},onClickItem:function(e){this.showList=!1,this.__selectItem(e)},keyUp:function(){this.cursor>0&&(this.cursor--,this.__itemView(this.$el.getElementsByClassName("jw-list-item")[this.cursor]))},keyDown:function(){this.cursor<this.internalItems.length-1&&(this.cursor++,this.__itemView(this.$el.getElementsByClassName("jw-list-item")[this.cursor]))},keyEnter:function(){this.showList&&this.internalItems[this.cursor]&&(this.__selectItem(this.internalItems[this.cursor]),this.showList=!1)}},watch:{show:function(){this.cursor=0}}},p=d,h=(n("c019"),n("2877")),m=Object(h["a"])(p,l,a,!1,null,"4e7c81d0",null),y=m.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"point-container",on:{click:function(t){return t.preventDefault(),e.itemClick(t)}}},[n("span",{staticClass:"label"},[e._v(e._s(e.name+e.suffix))]),n("autocomplete",{ref:"input",staticClass:"place-hold",style:{width:e.inputWidth+"px"},attrs:{disabled:!e.editable,triggerOnFocus:e.triggerOnFocus,fetch:e.fetchSuggestions},on:{select:e.select},nativeOn:{input:function(t){return e.inputHandle(t)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deleteHandle(e.v)}},model:{value:e.v,callback:function(t){e.v=t},expression:"v"}}),n("pre",{ref:"sensor",staticStyle:{"font-size":"16px",visibility:"hidden",position:"fixed","z-index":"-1",bottom:"-99999px"}},[e._v(e._s(e.v))])],1)},g=[],_={name:"InputItem",components:{autocomplete:y},props:{triggerOnFocus:{type:Boolean},id:{type:[Boolean,String,Number]},editable:{type:[Boolean],default:!1},name:{type:[String]},suffix:{type:[String]},fetchSuggestions:{type:Function}},data:function(){return{v:"",inputWidth:6}},methods:{itemClick:function(){this.disabled?this.$emit("itemClick",this.id):this.__focus()},__focus:function(){var e=this.$refs.input.$el.querySelector("input");e&&e.focus()},select:function(e){this.v="",this.inputWidth=6,this.$emit("select",e)},deleteHandle:function(){0===this.v.length&&this.$emit("deleteClick",this.id)},inputHandle:function(e){var t=this;this.v=e.target.value,this.$nextTick((function(){t.inputWidth=t.$refs["sensor"].clientWidth+6}))}}},k=_,I=(n("7fe1"),Object(h["a"])(k,v,g,!1,null,"3c3e7c78",null)),b=I.exports,w={name:"MultiItemsInput",components:{AutoCompleteInput:y,InputItem:b},props:{fetch:{type:Function},triggerOnFocus:{type:Boolean},placeholder:{type:String},height:{type:Number},separator:{type:String,default:" "}},data:function(){return{test:"test",inputWidth:"60",editable:!0,selectedItems:[],keywords:""}},mounted:function(){this.$refs["pre-input"].$el.querySelector("input").focus()},methods:{addSelectedItemsGenerator:function(e){var t=this,n=e+1;return function(e){t.selectedItems.splice(n,0,e),t.$nextTick((function(){if(t.selectedItems.length>0){var e=t.$refs["jw-selectedItems"+n];e&&e[0]&&e[0].$el.querySelector("input").focus()}})),t.$emit("select",t.selectedItems,e)}},deleteItem:function(e){var t=this,n=Object(u["a"])(this.selectedItems),i=n.slice(0);i.reverse();var s=i.findIndex((function(t){return e.id===t.id}));s=this.selectedItems.length-1-s;var r=s>0?s-1:void 0;this.selectedItems.splice(s,1),"undefined"!==typeof r?this.$nextTick((function(){var e=t.$refs["jw-selectedItems"+r][0];e&&e.$el.querySelector("input").focus()})):this.$nextTick((function(){var e=t.$refs["pre-input"];e&&e.$el.querySelector("input").focus()})),this.$emit("delete",e,this.selectedItems)},setLastItemFocus:function(){if(!(this.selectedItems.length<1)){var e=this.$refs["jw-selectedItems"+(this.selectedItems.length-1)][0];e&&e.$el.querySelector("input").focus()}}}},O=w,x=(n("7d06"),Object(h["a"])(O,o,c,!1,null,"86a20418",null)),$=x.exports,j={name:"app",components:{MultiItemsInput:$},data:function(){return{data:null}},methods:{search:function(e,t){var n=[{name:"牛奶",id:1},{name:"猪肉",id:2},{name:"牛肉",id:3},{name:"苹果",id:12},{name:"香蕉",id:13},{name:"牛腿",id:14},{name:"猪肝",id:21},{name:"牛排",id:22},{name:"雪梨",id:23},{name:"牛杂",id:24},{name:"牛油",id:25},{name:"牛舌",id:26},{name:"牛鼻",id:27},{name:"牛尾",id:28},{name:"牛百叶",id:29}];setTimeout((function(){if(e){var i=n.filter((function(t){return t.name.indexOf(e)>-1}));t(i)}else t(n)}),100)},select:function(e,t){this.data=JSON.stringify(e)+t},onDelete:function(e,t){this.data=JSON.stringify(e)+",   "+JSON.stringify(t)}}},S=j,C=(n("034f"),Object(h["a"])(S,s,r,!1,null,null,null)),F=C.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(F)}}).$mount("#app")},"7d06":function(e,t,n){"use strict";var i=n("1859"),s=n.n(i);s.a},"7fe1":function(e,t,n){"use strict";var i=n("d4b9"),s=n.n(i);s.a},"85ec":function(e,t,n){},c019:function(e,t,n){"use strict";var i=n("1a71"),s=n.n(i);s.a},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},d4b9:function(e,t,n){}});
//# sourceMappingURL=app.55190769.js.map